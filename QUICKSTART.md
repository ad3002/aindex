# AIndex Quick Start Guide

## Overview
AIndex is a k-mer indexing tool for efficient genomic sequence analysis. It provides both C++ command-line tools and Python API for indexing and querying genomic data.

## Quick Setup

### 1. Build Everything
```bash
make all
```
This builds all C++ binaries and the Python extension.

### 2. Run All Tests
```bash
make test-all
```
This runs the complete test suite including:
- Building the project
- Running regression tests with test data
- Testing the Python API

## Development Workflow

### Build Commands
- `make all` - Build all binaries and Python extension  
- `make clean` - Clean build artifacts
- `make pybind11` - Build only the Python extension

### Testing Commands
- `make test-all` - **Complete test suite (recommended for new users/CI)**
- `make test-quick` - **Quick validation test (fast functionality check)**
- `make test` - Quick Python API tests for development
- `make test-regression` - Run full regression tests and generate test data
- `make test-python-api` - Test Python module import and basic functionality
- `make test-python-with-data` - Test Python API with real data

### Get Help
```bash
make help
```

## Usage Examples

### Command Line Usage
After building with `make all`, you can use the command-line tools:

```bash
# Generate index from FASTQ files
python3 bin/compute_aindex.py -i file1.fastq,file2.fastq -t fastq -o output_prefix --lu 2 -P 4

# Alternative using kmer_counter pipeline
python3 bin/compute_aindex.py -i file1.fastq,file2.fastq -t fastq -o output_prefix --lu 2 -P 4 --use_kmer_counter
```

### Python API Usage
```python
import aindex

# Load an index
index = aindex.load_index_with_reads(
    index_file="output_prefix.23.index.bin",
    tf_file="output_prefix.23.tf.bin", 
    kmers_file="output_prefix.23.kmers.bin",
    txt_file="output_prefix.23.txt"
)

# Query k-mers
tf_value = index.get_tf("ATGCATGCATGCATGCATGCATG")
hash_value = index.get_hash("ATGCATGCATGCATGCATGCATG")
```

## File Requirements

The AIndex pipeline generates several files:
- `.index.bin` - Main index file
- `.tf.bin` - Term frequency data
- `.kmers.bin` - K-mer data  
- `.txt` - Text mapping file (generated by Python wrapper)
- `.reads` - Processed reads file
- `.ridx` - Read index file

## System Requirements

- **C++ Compiler**: g++ with C++17 support
- **Python**: 3.8+ (auto-detected)
- **Dependencies**: pybind11, cmake
- **OS**: macOS, Linux

## Troubleshooting

### Build Issues
1. **Python version mismatch**: The Makefile auto-detects Python version. If issues persist, check that `python3-config` is available.
2. **Missing dependencies**: Run `make clean && make all` to rebuild everything.

### Test Issues  
1. **Missing test data**: Run `make test-regression` first to generate test data.
2. **Python import errors**: Ensure you're in the project root directory and the extension was built successfully.

## Next Steps

- Check `examples/` directory for more usage examples
- See `tests/` directory for test implementations
- Read `README.md` for detailed documentation
- Use `make help` to see all available commands

---

**Quick Commands Summary:**
- **New users**: `make test-all` 
- **Quick check**: `make test-quick`
- **Development**: `make test`
- **Build only**: `make all`
- **Clean start**: `make clean && make all`
